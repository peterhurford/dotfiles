### Open Data
setwd('~/Programming/imsurvey')
imdata <- read.csv('imdata.csv')


### Clean Data
# Response ID
id <- imdata$Response.ID
# Metaethics
metaethics <- rep(NA, 1856)
metaethicsfeed <- imdata$What.moral.philosophy.do.you.subscribe.to..if.any. 
metaethics[metaethicsfeed == 'Consequentialist/utilitarian'] <- 'consequentialist'
metaethics[metaethicsfeed == 'Deontology'] <- 'deontology'  
metaethics[metaethicsfeed == 'Other' | metaethicsfeed == 'No opinion, or not familiar with these terms'] <- 'other'
metaethics[metaethicsfeed == 'Virtue ethics'] <- 'virtue'
metaethics[id == 17 | id == 45 | id == 122 | id == 201 | id == 217 | id == 377 | id == 425 | id == 524 | id == 571 | id == 971 | id == 974 | id == 994 | id == 1029 | id == 1054 | id == 1060 | id == 1035 | id == 1438 | id == 1459 | id == 1548 | id == 1572 | id == 1678 | id == 1707] <- 'consequentialist'  # Interpolate other, lump 'non-utilitarian consequetialist', 'non-realist consequentialist' and 'consequentialist in theory and deontology in practice' into consequentialist

# Causes
poverty = rep(NA, 1856)
povertyfeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Global.poverty.
poverty[povertyfeed == 'No'] <- 0
poverty[povertyfeed == 'Yes'] <- 1

environmentalism = rep(NA, 1856)
environmentalismfeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Environmentalism.
environmentalism[environmentalismfeed == 'No'] <- 0
environmentalism[environmentalismfeed == 'Yes'] <- 1

animals = rep(NA, 1856)
animalsfeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Animal.welfare.
animals[animalsfeed == 'No'] <- 0
animals[animalsfeed == 'Yes'] <- 1

rationality = rep(NA, 1856)
rationalityfeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Improving.rationality.or.science.
rationality[rationalityfeed == 'No'] <- 0
rationality[rationalityfeed == 'Yes'] <- 1

politics = rep(NA, 1856)
politicsfeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Political.reform.
politics[politicsfeed == 'No'] <- 0
politics[politicsfeed == 'Yes'] <- 1

ai = rep(NA, 1856)
aifeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Existential.risk..artificial.intelligence.
ai[aifeed == 'No'] <- 0
ai[aifeed == 'Yes'] <- 1

xrisk = rep(NA, 1856)
xriskfeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Existential.risk..other..
xrisk[xriskfeed == 'No'] <- 0
xrisk[xriskfeed == 'Yes'] <- 1

farfuture = rep(NA, 1856)
farfuturefeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Far.future.concerns..besides.existential.risk..
farfuture[farfuturefeed == 'No'] <- 0
farfuture[farfuturefeed == 'Yes'] <- 1

prioritization = rep(NA, 1856)
prioritizationfeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Cause.prioritization.
prioritization[prioritizationfeed == 'No'] <- 0
prioritization[prioritizationfeed == 'Yes'] <- 1

metacharity = rep(NA, 1856)
metacharityfeed = imdata$Which.of.the.following.causes.do.you.think.you.should.devote.resources.to...Meta.charities.which.direct.resources.to.these.causes.
metacharity[metacharityfeed == 'No'] <- 0
metacharity[metacharityfeed == 'Yes'] <- 1

# Diet
diet <- imdata$What.is.your.diet.
diet2 = rep(NA, 1856)
diet2[diet == 'Meat-eating'] <- 0
diet2[diet != 'Meat-eating' & !is.na(diet)] <- 1

# Group
groupfeed = imdata$How.did.you.first.hear.about..Effective.Altruism..
group = rep(NA, 1856)
group[groupfeed == "80,000 Hours"] <- "80K"
group[groupfeed == "Animal Charity Evaluators (formerly Effective Animal Activism)"] <- "ACE"
group[groupfeed == "Facebook"] <- "FB"
group[groupfeed == "Friend"] <- "Friend"
group[groupfeed == "GiveWell"] <- "GiveWell"
group[groupfeed == "Giving What We Can"] <- "GWWC"
group[groupfeed == "LessWrong"] <- "LW"
group[groupfeed == "Search engine"] <- "Search"
group[groupfeed == "TED Talk (Peter Singer)"] <- "TED"
group[groupfeed == "The Life You Can Save"] <- "TLYCS"
#TODO: Impute Other

# Friend Count
friendcount = imdata$Roughly.how.many.of.your.friends.would.describe.themselves.as.Effective.Altruists.

# Career Path
careerfeed = imdata$What.career.path.do.you.plan.to.follow.
career = rep(NA, 1856)
career[careerfeed == "Direct charity/non-profit work"] <- "Direct"
career[careerfeed == "Earning to Give"] <- "ETG"
career[careerfeed == "None"] <- "None"
career[careerfeed == "Research"] <- "Research"
#TODO: Impute Other

# Student
student = imdata$Are.you.a.full.time.student.

# Donation Total
donatefeed = imdata$Over.2013..how.much.in.total.did.you.donate.
donate_absolute = rep(NA, 1856)
#TODO: Impute donation total
#TODO: Impute income total
#TODO: Donation percentage with division

# In the Random Sample?
in.sample = rep(FALSE, 1856)
in.sample[id == 1606 | id == 1572 | id == 144 | id == 245 | id == 374 | id == 1683 | id == 1612 | id == 1580 | id == 1640 | id == 189 | id == 1575 | id == 163 | id == 1564 | id == 1611 | id == 207 | id == 1577 | id == 1607 | id == 1568 | id == 1630 | id == 1658 | id == 1598 | id == 1561 | id == 1596 | id == 1614 | id == 1615 | id == 252 | id == 1592 | id == 1054 | id == 1570 | id == 1639 | id == 1338] <- TRUE 




## Descriptive Statistics
count(metaethics)

count(poverty)
count(environmentalism)
count(animals)
count(rationality)
count(politics)
count(ai)
count(xrisk)
count(farfuture)
count(prioritization)
count(metacharity)

count(diet)
count(diet2)

count(group)
count(friendcount)
count(student)

count(career)
