- content_for :head do
  = stylesheet_link_tag "analytics/main", :media => "all"
  = javascript_include_tag "knockout-3.0.0"
  = javascript_include_tag "jquery"
  = javascript_include_tag "admin/spin.min"
  = javascript_include_tag "admin/jquery.spin"
  = view_model_include_tag "include/view_model"
  = view_model_include_tag "include/partial"
  = view_model_include_tag "view_model"
  = javascript_include_tag "bootstrap-tooltip"
  = view_model_include_tag "analytics/dashboard"
  :javascript
    window.ViewModel.use(AnalyticsDashboard, {
      dashboard_info_ajax_path: "#{@dashboard_info_ajax_path}",
      current_head: "#{@current_head}"
    })
.analytics-dashboard-container.bs
  .analytics-dashboard-view.table-bordered
    .analytics-dashboard-view-header Missing credit model scores
    .analytics-dashboard-subview
      #score-nuggets{ :"data-bind" => "foreach: score_nuggets" }
        %a.analytics-dashboard-score-nugget{rel: 'tooltip', :"data-toggle" => "tooltip", |
          :"data-placement" => "bottom", |
          :"data-bind" => "attr: { title: title,  href: link }, css: { good: !score_missing, bad: score_missing, microbilt: !has_microbilt && !score_missing }"}

      .clear-top
    .wrappa{ :"data-bind" => "visible: has_running_variables" }
      .analytics-dashboard-view-header Running variable statistics
      .analytics-dashboard-subview
        #stats
          %table
            %thead
              %tr
                %th Name
                %th Mean
                %th Historical Mean
                %th % Missing
                %th % Historical Missing
            %tbody{ :"data-bind" => "foreach: variable_stats" }
              %tr{ :"data-bind" => "css: { bad: bad }" }
                %td{ :"data-bind" => "text: name" }
                %td{ :"data-bind" => "text: mean" }
                %td{ :"data-bind" => "text: historical_mean" }
                %td{ :"data-bind" => "text: missing" }
                %td{ :"data-bind" => "text: historical_missing" }

  .analytics-menu
    .left
      %a{ 'data-bind' => 'click: load_prev', :id => 'prev' } &larr; 
      #timestamp
        N/A
      %a{ 'data-bind' => 'click: load_next', :id => 'next' } &rarr;
    .right
      Speed:
      #speedstamp
        N/A
